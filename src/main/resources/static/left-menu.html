<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Left Menu</title>
    <link href="/css/style.css" rel="stylesheet" type="text/css">
</head>
<body>
<div class="blog_right_sidebar">
    <aside class="single_sidebar_widget post_category_widget">
        <h4 class="widget_title">내 계정</h4>
        <ul class="list cat-list">
            <li class="page-item">
                <a href="/view/users/info" class="d-flex" id="profileMenu">
                    <p>프로필</p>
                </a>
            </li>
            <li class="page-item">
                <a href="/view/posts/myList?postCategory=GENERAL" class="d-flex" id="myPostsMenu">
                    <p>작성한 게시글</p>
                </a>
            </li>
            <li class="page-item">
                <a href="/view/comments/myList" class="d-flex" id="myCommentsMenu">
                    <p>작성한 댓글</p>
                </a>
            </li>
            <li class="page-item">
                <a href="/view/posts/myLikeList" class="d-flex" id="PostLikesMenu">
                    <p>좋아요한 게시글</p>
                </a>
            </li>
            <li class="page-item">
                <a href="/view/posts/myScrape" class="d-flex" id="savedPostsMenu">
                    <p>저장한 게시글</p>
                </a>
            </li>
        </ul>
    </aside>
</div>

<script>
    document.addEventListener("DOMContentLoaded", function () {

        function clearActive() {
            document.querySelectorAll(".cat-list li")
                .forEach(el => el.classList.remove("active"));
            document.querySelectorAll(".cat-list li p")
                .forEach(el => el.classList.remove("active"));
        }

        function setActiveByUrl() {
            const path = location.pathname;

            clearActive();

            if (path.startsWith("/view/users/info")) {
                document.getElementById("profileMenu").closest("li").classList.add("active");
                document.getElementById("profileMenu").querySelector("p").classList.add("active");
            }
            else if (path.startsWith("/view/posts/myList")) {
                document.getElementById("myPostsMenu").closest("li").classList.add("active");
                document.getElementById("myPostsMenu").querySelector("p").classList.add("active");
            }
            else if (path.startsWith("/view/comments/myList")) {
                document.getElementById("myCommentsMenu").closest("li").classList.add("active");
                document.getElementById("myCommentsMenu").querySelector("p").classList.add("active");
            }
            else if (path.startsWith("/view/posts/myLikeList")) {
                document.getElementById("PostLikesMenu").closest("li").classList.add("active");
                document.getElementById("PostLikesMenu").querySelector("p").classList.add("active");
            }
            else if (path.startsWith("/view/posts/myScrape")) {
                document.getElementById("savedPostsMenu").closest("li").classList.add("active");
                document.getElementById("savedPostsMenu").querySelector("p").classList.add("active");
            }
        }

        setActiveByUrl();
    });
</script>
</body>
</html>